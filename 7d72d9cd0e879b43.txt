-- PROCEDURE: public.change_event(integer, text)

-- DROP PROCEDURE IF EXISTS public.change_event(integer, text);

CREATE OR REPLACE PROCEDURE public.change_event(
	IN _id integer,
	IN _event text)
LANGUAGE 'plpgsql'
AS $BODY$
begin
	update cell set  event = _event
		where id = _id;
	if not found then
		raise exception'There is no event %',
			_id;
	end if;
end;

$BODY$;
ALTER PROCEDURE public.change_event(integer, text)
    OWNER TO postgres;

COMMENT ON PROCEDURE public.change_event(integer, text)
    IS 'Меняет drugs, если это семантически возможно.';



-- PROCEDURE: public.data_update(bigint, character varying, bigint, bigint, text, bigint)

-- DROP PROCEDURE IF EXISTS public.data_update(bigint, character varying, bigint, bigint, text, bigint);

CREATE OR REPLACE PROCEDURE public.data_update(
	IN _student_group_id bigint,
	IN _subject_code character varying,
	IN _room bigint,
	IN _teacher_pk bigint,
	IN _event text,
	IN _id bigint)
LANGUAGE 'plpgsql'
AS $BODY$
begin
    update cell set subject_code = _subject_code,
    room=_room, teacher_pk=_teacher_pk, event = _event 
    where id = _id;
end;

$BODY$;
ALTER PROCEDURE public.data_update(bigint, character varying, bigint, bigint, text, bigint)
    OWNER TO postgres;

COMMENT ON PROCEDURE public.data_update(bigint, character varying, bigint, bigint, text, bigint)
    IS 'Меняет drugs, если это семантически возможно.';
